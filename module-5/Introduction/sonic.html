<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <title>Sonic Example</title>
    <style>
      .prevent-select {
        -webkit-user-select: none; /* Safari */
        -ms-user-select: none; /* IE 10 and IE 11 */
        user-select: none; /* Standard syntax */
      }
    </style>
  </head>
  <body class="prevent-select">
    <canvas id="cvs" style="background-color: antiquewhite" width="1024" height="512"></canvas>
  </body>
  <script defer>
    const cvs = document.getElementById("cvs");
    const ctx = cvs.getContext("2d");
    const sonicPath = "sonic_sprite_sheet.png" ;
    const sonicSheet = new Image();
    const Sonic2 = { x: 0, y: 127, width: 102, height: 121, count: 9};

    let framenumber = 0;
    let posX = 0;
    let hero = Sonic2;


    function animate(){
      ctx.clearRect(0, 0, cvs.width, cvs.height);
      const dx = 0, dy = 0,dw = Sonic2.width, dh = Sonic2.height;
      const sx = framenumber * Sonic2.width, sy = Sonic2.y, sw = Sonic2.width, sh = Sonic2.height;
      ctx.drawImage(sonicSheet, sx, sy, sw, sh, dx + posX, dy, dw, dh);
      framenumber++;
      if(framenumber >= Sonic2.count){
        framenumber = 0;
      }
      if(posX - Sonic2.width < cvs.width)
      posX += 15;
      console.log(posX);
    } else {
      posX = cvs.width - Sonic2.width;
    }
    
    function sonicSheetLoaded() {
      console.log("Sonic sheet loaded");
      setInterval(animate,100);
    }
      
    sonicSheet.addEventListener("load", sonicSheetLoaded);
    sonicSheet.src = sonicPath;


  </script>
</html>